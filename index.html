<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./css/bootstrap.css">
  <link rel="stylesheet" href="./assests/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.js"></script>

  <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>

<body>
  <script src="./assests/index.js"></script>
  <div class="header">
    <h1 style="text-align: Center; color: white"> Tổng hợp dịch vụ</h1>
    <div class="container-fluid padding" style="height:15px;">
      <div class="row">
          <div class="col-md-9"></div>
          <div class="col-md-3 col-12 text-center">
              <h6 style="margin-bottom: 0px; color: #fff;" id="current_date"></h6>
                          <script>
                              date = new Date();
                              year = date.getFullYear();
                              month = date.getMonth() + 1;
                              day = date.getDate();
                              document.getElementById("current_date").innerHTML = "Hiện tại: "+ day + "/" + month + "/" + year;
                          </script>
          </div>
      </div>
  </div>

    <div id="box">
      <div class="row">
        <div class="col-md-8 col-sm-12 col-12 bg-color">
          <div class="repon repon1 repon2">
            <div class="lich">
              <div class="input-group " style="height: 65px;">
                <div class="row" style="margin-top: 10px; ">
                  <h5 class="col-md-3 col-sm-6  col-12" style="color:#fff ;margin-top: 10px;padding: 0px;">Trung bình số
                    ca</h5>

                  <div class="col-md-3 col-sm-6 col-12">
                    <div class="row">
                      <p class="col-md-6 col-sm-6 col-6"
                        style="color:#fff; font-size: 14px; margin-top: 7px;padding: 0px;">Hiển thị
                        theo:</p>

                      <div class="col-md-6 col-sm-4 col-6" style="padding: 0px;">
                        <select class="calendar-select1 ">
                          <option value="1">Ngày</option>
                          <option value="2">Tháng</option>
                          <option value="3">Năm</option>
                        </select>
                      </div>
                    </div>

                  </div>

                  <div class="col-md-3 col-sm-6 col-12">
                    <div class="row">
                      <p class="col-md-3 col-sm-4 col-6"
                        style="color:#fff;font-size: 14px;margin-top: 8px;padding: 0px;">Từ ngày
                      </p>                     
                        <!-- <i id="icon" class="far fa-calendar-alt"></i> -->
                        <input type="date" id="date_start" class="col-md-7 col-sm-3 col-6" style="margin-top:5px ;height: 25.2px;"
                        onblur="compareDate($('#date_start').val(), $('#date_end').val())">
                    </div>
                  </div>

                  <div class="col-md-3 col-sm-6 col-12">
                    <div class="row">
                      <p class="col-md-4 col-sm-4 col-6"
                        style="color:#fff;font-size: 14px;margin-top: 8px;padding: 0px;">Đến ngày
                      </p>
                        <input type="date" id="date_end" class="col-md-7 col-sm-3 col-6" style="margin-top:5px ;height: 25.2px;" 
                        onblur="compareDate($('#date_start').val(), $('#date_end').val()), RandomData()">
                    </div>
                  </div>

                  <script>
                    // let start = $('#date_start').val();
                    // let end = $('#date_end').val();

                    function compareDate(start, end){
                      if (start > end){
                        alert('Ngày nhập vào không hợp lệ!!!');
                        $('#date_start') = '';
                        $('#date_end') = '';
                        return;
                      }
                    }
                    
                  </script>

                </div>
              </div>



            </div>

            <div class="col-md-12 col-sm-12 col-12 ">
              <div class="reponbieudo reponbieudo1 reponbieudo2">

                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

                <canvas id="myChart" style="width:100%; height: 220px">
                </canvas>
                <!-- <input type="button" value="New Data" onclick="RandomData()"> -->

                <script>
                  // var xValues = ['Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7', 'Chủ nhật'];
                  // var yValues = [175, 155, 149, 130, 145, 50, 60];

                  // window.setInterval(function(){                    
                  //   if($('#date_start').val() < $('#date_end'.val())){
                  //     yValues = [125, 105, 99, 80, 95, 0, 10];
                  //     chart.update();
                  //   }
                  //   else {
                  //     yValues= [10, 20, 30, 40, 30, 20, 10];
                  //     chart.update();
                  //   }
                  // }, 1000);

                  var canvas = document.getElementById('myChart');

                  var data = {
                  labels: ["Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7", "Chủ nhật"],
                  datasets: [
                      {
                          label: "My dataset",
                          fill: false,
                          lineTension: 0.1,
                          backgroundColor: "rgba(75,192,192,0.4)",
                          borderColor: "rgba(46, 98, 238, 1)",
                          borderCapStyle: 'butt',
                          borderDash: [],
                          borderDashOffset: 0.0,
                          borderJoinStyle: 'miter',
                          pointBorderColor: "rgba(46, 98, 238, 1)",

                          pointBackgroundColor: "#fff",
                          pointBorderWidth: 1,
                          pointHoverRadius: 5,
                          pointHoverBackgroundColor: "rgba(46, 98, 238, 1)",
                          pointHoverBorderColor: "rgba(220,220,220,1)",
                          pointHoverBorderWidth: 2,
                          pointRadius: 5,
                          pointHitRadius: 10,
                          data: [175, 155, 149, 130, 145, 50, 60],
                      }
                  ]
              };

                  function RandomData(){
                    var newData=[];
                    for(var i=0;i<7;i++){
                      newData.push(Math.round(Math.random() * 100))
                    }
                      myLineChart.data.datasets[0].data =newData;
                    myLineChart.update();
                  }
                  var option = {
                    maintainAspectRatio: false,
                    legend: { display: false },
                    scales: {
                      yAxes: [{
                        ticks: {
                          min: 0,
                          max: 200,
                          stepSize: 50,
                          fontColor: 'white'

                        },
                        gridLines: {
                          color: "#b2b7bd",
                          zeroLineColor: "#b2b7bd",
                        },
                      }],
                      xAxes: [{
                        offset: true,
                        ticks: {
                          fontColor: 'white'
                        },
                        gridLines: {
                          display: false
                        },
                      }],
                      }
                  };


                  var myLineChart = Chart.Line(canvas,{
                      data:data,
                      options:option
                  });

                                    
                  new Chart("myChart", {
                    type: "line",
                  //   data: {
                  //     labels: xValues,
                  //     datasets: [{
                  //       fill: false,
                  //       lineTension: 0,
                  //       backgroundColor: "#155ed1",
                  //       borderColor: "#155ed1",
                  //       data: data

                  //     }]
                  //   },                   

                  //   options: {
                  //     maintainAspectRatio: false,

                  //     legend: { display: false },
                  //     scales: {
                  //       yAxes: [{
                  //         ticks: {
                  //           min: 0,
                  //           max: 200,
                  //           stepSize: 50,
                  //           fontColor: 'white'

                  //         },
                  //         gridLines: {
                  //           color: "#b2b7bd",
                  //           zeroLineColor: "#b2b7bd",
                  //         },
                  //       }],
                  //       xAxes: [{
                  //         offset: true,
                  //         ticks: {
                  //           fontColor: 'white'
                  //         },
                  //         gridLines: {
                  //           display: false
                  //         },
                  //       }],

                  //     }
                  //   }
                  });
                </script>
              </div>



            </div>
          </div>



        </div>
        <div class=" col-md-3 col-sm-12 col-12">
          <div class="row">
            <div class=" col-md-5 col-sm-5 col-5  bg-color " style="height: 140px; margin:10px 3%;">
              <h4 class="text-notifi">Tổng số</h4>
              <h1 id='sum3ele' class="number-notifi"></h1>
            </div>
            <div class=" col-md-5 col-sm-5 col-5 bg-color" style="height: 140px; margin:10px 3%;">
              <h4 class="text-notifi">Đã duyệt</h4>
              <h1 id="ele1" class="number-notifi-2">32</h1>
            </div>
          </div>

          <div class="row">
            <div class=" col-md-5 col-sm-5 col-5 bg-color " style="height: 140px; margin:10px 3%;">
              <h4 class="text-notifi">Chưa đọc</h4>
              <h1 id="ele2" class="number-notifi-3">20</h1>
            </div>
            <div class=" col-md-5 col-sm-5 col-5  bg-color" style="height: 140px; margin:10px 3%;">
              <h4 class="text-notifi">Đang đọc</h4>
              <h1 id="ele3" class="number-notifi-3">2</h1>
            </div>
          </div>
        </div>

        <script>
          var ele1 = parseFloat(document.getElementById('ele1').innerHTML);
          var ele2 = parseFloat(document.getElementById('ele2').innerHTML);
          var ele3 = parseFloat(document.getElementById('ele3').innerHTML);
          function sum3(){
            document.getElementById('sum3ele').innerHTML = ele1 + ele2 + ele3;
          }
          sum3();
        </script>
      </div>

      <div class="row">
        <div class=" col-md-8 col-sm-12 col-12  bg-color" style="height: 315px;">
          <div id="header-table">
            <h5>Số ca/Bác sĩ</h5>
            <div>
              <p style="text-align: right" id="current_date3"></p>
              <script>
                date = new Date();
                year = date.getFullYear();
                month = date.getMonth() + 1;
                day = date.getDate();
                document.getElementById("current_date3").innerHTML = "Ngày " + day + "/" + month + "/" + year;
              </script>

            <div class="custom-control custom-checkbox">
              <input type="checkbox" class="custom-control-input" id="isscroll-checkbox" checked>
              <label class="custom-control-label" for="isscroll-checkbox">Cuộn</label>
            </div>
            </div>
          </div>
          <style>
            /* width */
            ::-webkit-scrollbar {
              width: 8px;
            }

            /* Track */
            ::-webkit-scrollbar-track {
              background: #f1f1f1;
            }

            /* Handle */
            ::-webkit-scrollbar-thumb {
              background: #888;
            }

            /* Handle on hover */
            ::-webkit-scrollbar-thumb:hover {
              background: #555;
            }
          </style>
          <div class="table-wrapper-scroll-y my-custom-scrollbar">
            <div class="table-responsive table-container" style="overflow-y: auto;">
              <table id="tab" class="table" > <!--style="height: 400px"-->
                <thead>
                    <tr class="table-borderless">
                        <th scope="col">Họ và tên</th>
                        <th scope="col">CT</th>
                        <th scope="col">DX</th>
                        <th scope="col">Tổng</th>
                    </tr>
                </thead>
                <tbody style="font-weight: lighter; border-spacing: 3px;"class="table-borderless table-sm">
                    <tr>
                        <th scope="row">Bs Nguyễn Việt Anh</th>
                        <td>0</td>
                        <td>32</td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">Bs Lương Xuân Anh</th>
                        <td>10</td>
                        <td>40</td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">Bs Nguyễn Văn Anh</th>
                        <td>20</td>
                        <td>20</td>
                        <td></td>
                    </tr>
                    <tr>
                    <th scope="row">Bs Nguyễn Văn Bình</th>
                    <td>10</td>
                    <td>5</td>
                    <td></td>
                </tr>
                <tr>
                    <th scope="row">Bs Nguyễn Văn Chí</th>
                    <td>20</td>
                    <td>10</td>
                    <td></td>
                </tr>
                <tr>
                    <th scope="row">Bs Nguyễn Văn Duy</th>
                    <td>7</td>
                    <td>49</td>
                    <td></td>
                </tr>
                <tr>
                  <th scope="row">Bs Nguyễn Văn Một</th>
                  <td>3</td>
                  <td>9</td>
                  <td></td>
              </tr>
                    <tr>
                      <th scope="row">Bs Nguyễn Văn Hai</th>
                      <td>4</td>
                      <td>16</td>
                      <td></td>
                  </tr>
                  <tr>
                    <th scope="row">Bs Nguyễn Văn Tam</th>
                    <td>5</td>
                    <td>25</td>
                    <td></td>
                </tr>
                <tr>
                  <th scope="row">Bs Nguyễn Văn Bốn</th>
                  <td>6</td>
                  <td>36</td>
                  <td></td>
              </tr>
              <tr>
                <th scope="row">Bs Nguyễn Văn Năm</th>
                <td>1</td>
                <td>51</td>
                <td></td>
            </tr>
                    </tr>
                    </tr>

                </tbody>
            </table>
            <script>
              function sumtab(){
                  $("tr").each(function(){
                      var sum = parseFloat($(this).find("td:eq(0)").text()) + 
                                parseFloat($(this).find("td:eq(1)").text());
                      $(this).find("td:eq(2)").text(sum);
                  })
              }
                sumtab();

                window.time = 0;
                var index = 0;
                var isScrollable = true;

                $(document).ready(setTableScroll());
                $('#isscroll-checkbox').change(setTableScroll);

                function setTableScroll() {
                  var rowNumbers = $("#tab > tbody > tr").length;
                  var rowsPerDisplay = 5;
                
                  if (rowNumbers < rowsPerDisplay) {
                      rowsPerDisplay = rowNumbers;
                  }
                  if ($('#isscroll-checkbox').is(':checked')) {
                      $('.table-container').css('overflow-y', 'auto');
                      isScrollable = true;
                  }
                  else {
                      $('.table-container').css('overflow-y', 'hidden');
                      isScrollable = false;
                  }
                  if (isScrollable === false) {
                      time = setInterval(function() {
                          var step = rowsPerDisplay-1;
                          ++index;
                          if (index > rowNumbers) {
                              index = 0;
                              return;
                          }
                          var indexAfterAdd = index + rowsPerDisplay - 1;
                          if (indexAfterAdd > rowNumbers) {
                              step = rowsPerDisplay - (indexAfterAdd-rowNumbers);
                          }
                          var beginIndex = index;
                          index += step;
                          for (var i = 1; i <= rowNumbers; ++i) {
                              if (beginIndex <= i && i <= index) {
                                  $('#tab > tbody > tr:nth-child(' + i + ')').show();
                              }
                              else {
                                  $('#tab > tbody > tr:nth-child(' + i + ')').hide();
                              }
                          }
                      }, 2000);
                  }
                  else {
                      clearInterval(time);
                      for (var i = 1; i <= rowNumbers; ++i) {
                          $('#tab > tbody > tr:nth-child(' + i + ')').show();
                      }
                  }
              }
                
                  
            </script>
            </div>
          </div>
        </div>

        <div class="col-md-3 col-sm-12 col-12 " style="margin-bottom: 45px;" >
          <div class="repon repon1 repon2">
            <div class=" bg-color">

              <div class="bottom">
                <h6 class="text-bottom1">Số ca/Nhóm dịch vụ</h6>
                <p class="text-bottom1" style="text-align: right" id="current_date2"></p>
                  <script>
                    date = new Date();
                    year = date.getFullYear();
                    month = date.getMonth() + 1;
                    day = date.getDate();
                    document.getElementById("current_date2").innerHTML = "Ngày " + day + "/" + month + "/" + year;
                  </script>
    
              </div>

              <canvas id="myChart1" style="width:100%;max-width:600px;height:268px"></canvas>
    
              <script>
                  var xValues = ["CT", "DX"];
                  var yValues = [2, 52];
                  var barColors = ["#155ed1", "#155ed1"];

                  new Chart("myChart1", {
                      type: "bar",
                      data: {
                          labels: xValues,
                          datasets: [{
                              backgroundColor: barColors,
                              data: yValues
                          }]
                      },
                      options: {
                         
                          Response:false,
                          legend: { display: false },
                          scales: {
                              yAxes: [{
                                  ticks: {
                                      min: 0,
                                      max: 60,
                                      stepSize: 20,
                                      fontColor: 'white'
                                  },
                                  gridLines: {
                                      color: "#b2b7bd",
                                      zeroLineColor: "#b2b7bd"
                                  }
                              }],
                              xAxes: [{
                                  ticks: {
                                      fontColor: 'white'
                                  },
                                  gridLines: {
                                      display: false
                                  }

                              }],


                          }
                      }
                  });
              </script>
            </div>
          </div>

        </div>


      </div>
    </div>




  </div>

</body>

</html>